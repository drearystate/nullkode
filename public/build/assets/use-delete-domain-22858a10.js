import{cu as T,cv as D,cw as I,cx as k,cy as C,r as m,cz as E,bX as z,e as P,an as L,j as $,v as A,a as _,ah as U,b as M,t as K,d as O,g as H,q as R,s as V}from"./main-337de3ae.js";import{r as G,f as S,B as X,d as J,b as W}from"./blank-page-skeleton-8a67bffa.js";var Y=class extends T{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:D()})}getOptimisticResult(e){return e.behavior=D(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var p,i;const{state:a}=e,n=super.createResult(e,t),{isFetching:r,isRefetching:s,isError:u,isRefetchError:v}=n,c=(i=(p=a.fetchMeta)==null?void 0:p.fetchMore)==null?void 0:i.direction,d=u&&c==="forward",h=r&&c==="forward",l=u&&c==="backward",f=r&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:I(t,a.data),hasPreviousPage:k(t,a.data),isFetchNextPageError:d,isFetchingNextPage:h,isFetchPreviousPageError:l,isFetchingPreviousPage:f,isRefetchError:v&&!d&&!l,isRefetching:s&&!h&&!f}}};function Z(e,t){return C(e,Y,t)}function ee(e){return"next_cursor"in e?e.next_cursor!=null:"last_page"in e?e.current_page<e.last_page:"next_page"in e?e.next_page!=null:e.data.length>0&&e.data.length>=e.per_page}function te({queryKey:e,defaultOrderDir:t,defaultOrderBy:a,queryParams:n},r,s=""){return r.orderBy||(r.orderBy=a),r.orderDir||(r.orderDir=t),[...e,r,s,n]}function re(e){var w,F,Q,q;const{initialPage:t,endpoint:a,defaultOrderBy:n,defaultOrderDir:r,queryParams:s,paginate:u,transformResponse:v,willSortOrFilter:c=!1}=e,[d,h]=m.useState(""),[l,f]=m.useState({orderBy:n,orderDir:r}),g=te(e,l,d),p=m.useRef(E(g)).current,i=Z({placeholderData:c?z:void 0,queryKey:g,queryFn:({pageParam:o,signal:x})=>{const b={...s,perPage:(t==null?void 0:t.per_page)||(s==null?void 0:s.perPage),query:(s==null?void 0:s.query)??d,paginate:u,...l};return u==="cursor"?b.cursor=o:b.page=o||1,ae(a,b,v,x)},initialPageParam:u==="cursor"?"":1,getNextPageParam:o=>ee(o.pagination)?"next_cursor"in o.pagination?o.pagination.next_cursor:o.pagination.current_page+1:null,initialData:()=>{if(!(!t||E(g)!==p))return{pageParams:[void 0,1],pages:[{pagination:t}]}}}),j=m.useMemo(()=>{var o;return((o=i.data)==null?void 0:o.pages.flatMap(x=>x.pagination.data))||[]},[(w=i.data)==null?void 0:w.pages]),y=(F=i.data)==null?void 0:F.pages[0].pagination,B=y&&"total"in y&&y.total?y.total:null;return{...i,items:j,totalItems:B,noResults:((q=(Q=i.data)==null?void 0:Q.pages)==null?void 0:q[0].pagination.data.length)===0,isReloading:i.isFetching&&!i.isFetchingNextPage&&i.isPlaceholderData,sortDescriptor:l,setSortDescriptor:f,searchQuery:d,setSearchQuery:h}}async function ae(e,t,a,n){return t.query&&await new Promise(r=>setTimeout(r,300)),P.get(e,{params:t,signal:t.query?n:void 0}).then(r=>a?a(r.data):r.data)}const de=L($.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined"),le=""+new URL("website-builder-2fb98cdd.svg",import.meta.url).href;function he(e){return re({queryKey:["templates",e],endpoint:"templates",paginate:"simple",willSortOrFilter:!0,queryParams:e})}function fe(e,t=!1){return A({queryKey:["templates",`${e}`,t],queryFn:()=>N(e)})}function N(e,t=!1){return P.get(`templates/${e}`,{params:{loadPages:t}}).then(a=>a.data)}function ge(e){const{trans:t}=_(),a=U();return M({mutationFn:n=>se(n),onSuccess:async()=>{G(),await a.invalidateQueries({queryKey:["projects"]}),K(t(O("Site created")))},onError:n=>H(n,e)})}async function se({name:e,templateName:t,userId:a,published:n}){const r={name:e,templateName:t,pages:[],userId:a,published:n};if(t)try{const s=await R.fetchQuery({queryKey:["templates",t,!0],queryFn:()=>N(t,!0)});r.pages=ie(s.template)}catch(s){return Promise.reject(s)}else r.pages=ne();return P.post("projects",r).then(s=>s.data)}function ne(){return[{name:"index",html:S(X)}]}function ie(e){return e.pages.map(t=>({name:t.name,html:S(t.html,e)}))}const pe=""+new URL("world-ea41c34b.svg",import.meta.url).href;function ye(){const{trans:e}=_();return M({mutationFn:t=>oe(t),onSuccess:(t,a)=>{K.positive(e(O("“:domain” removed",{values:{domain:J(a.domain.host)}}))),R.invalidateQueries({queryKey:W("custom-domain")})},onError:t=>V(t)})}function oe({domain:e}){return P.delete(`custom-domain/${e.id}`).then(t=>t.data)}export{de as M,ge as a,le as b,he as c,ye as d,fe as e,ee as h,re as u,pe as w};
//# sourceMappingURL=use-delete-domain-22858a10.js.map
